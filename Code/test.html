<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>打地鼠</title>
    <link rel="stylesheet" type="text/css" href="css/地鼠.css" />
</head>

<body>
    <div id="out">

    </div>
    <h1>
        得分:<span id="fen_shu">0</span>&emsp;
        倒计时:<input type="text" value="30" id="clock">

    </h1>
</body>
<script type="text/javascript">
    //获取渲染地鼠的方块
    var out = document.getElementById("out");
    //加载时执行此方法，渲染地图
    onload = function () {
        for (var i = 0; i < 20; i++) {
            var p = document.createElement("p");
            out.appendChild(p);
        }
    }
    var count = 0;
    var fenshu = 0;
    var ps = document.getElementsByTagName("p");
    //随机刷新老鼠的位置
    function suijilaoshu() {
        var index = Math.floor(Math.random() * ps.length);
        for (var i = 0; i < ps.length; i++) {
            ps[i].style.background = "url(img/00.jpg)";
        }
        ps[index].style.background = "url(img/01.jpg)";
        count = index;
        ps[index].className = "laoshu";
    }
    //定时调用
    setInterval("suijilaoshu()", 1500);
    var clock = document.getElementById("clock");
    var fen = document.getElementById("fen_shu");

    var second = 30;
    var timer;
    //倒计时方法，每一局游戏时长30秒
    function daojishi() {
        if (second != 0) {
            second--;
            clock.value = second + "s";
        } else {
            clearInterval(timer);
            alert("游戏结束,您的得分为:" + fenshu);
            location.reload();
        }
    }
    timer = setInterval("daojishi()", 1000);
    //点中老鼠后，切换图片为老鼠被击中
    onclick = function (event) {
        var obj = event.target;
        if (obj.className == "laoshu") {
            ps[count].style.background = "url(img/02.jpg)";
            ps[count].className = "";
            fenshu += 10;
            fen.innerHTML = fenshu;
        }
    }
</script>

</html>